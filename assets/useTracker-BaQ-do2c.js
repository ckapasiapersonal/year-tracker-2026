import{d as H,o as J,a as L,j as w,l as S,i as D,n as I,k as te,c as re,b as m,t as T,u as N,g as ae,r as d,m as g}from"./index-DsleNGlg.js";import{u as oe}from"./useAuth-CezXVzgo.js";const se={class:"flex flex-wrap items-center gap-2"},ne=H({__name:"TrackerNavigation",setup(s){return(l,o)=>{const f=te("router-link");return J(),L("div",se,[w(f,{to:"/",class:I(["rounded-md border px-4 py-2 text-sm font-medium transition-colors",l.$route.path==="/"?"bg-brand-500 text-white border-brand-500":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"])},{default:S(()=>o[0]||(o[0]=[D(" Dashboard ")])),_:1},8,["class"]),w(f,{to:"/yearly-overview",class:I(["rounded-md border px-4 py-2 text-sm font-medium transition-colors",l.$route.path==="/yearly-overview"?"bg-brand-500 text-white border-brand-500":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"])},{default:S(()=>o[1]||(o[1]=[D(" Year in Color ")])),_:1},8,["class"]),w(f,{to:"/major-things",class:I(["rounded-md border px-4 py-2 text-sm font-medium transition-colors",l.$route.path==="/major-things"?"bg-brand-500 text-white border-brand-500":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"])},{default:S(()=>o[2]||(o[2]=[D(" Major Things ")])),_:1},8,["class"]),w(f,{to:"/financial",class:I(["rounded-md border px-4 py-2 text-sm font-medium transition-colors",l.$route.path==="/financial"?"bg-brand-500 text-white border-brand-500":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"])},{default:S(()=>o[3]||(o[3]=[D(" Financials ")])),_:1},8,["class"]),w(f,{to:"/settings",class:I(["rounded-md border px-4 py-2 text-sm font-medium transition-colors",l.$route.path==="/settings"?"bg-brand-500 text-white border-brand-500":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"])},{default:S(()=>o[4]||(o[4]=[D(" Settings ")])),_:1},8,["class"])])}}}),ie={class:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},le={class:"text-title-md2 font-bold text-black dark:text-white"},ce={class:"flex flex-col gap-3 sm:flex-row sm:items-center"},de={class:"flex items-center gap-2"},ge={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},ue={key:0,class:"ml-2 flex items-center gap-2 border-l border-gray-200 pl-4 dark:border-gray-700"},me={class:"text-sm font-bold text-black dark:text-white"},Ce=H({__name:"TrackerHeader",props:{title:{}},setup(s){const{logout:l,currentUser:o}=oe(),f=re(()=>new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}));return(B,x)=>(J(),L("div",ie,[m("h2",le,T(B.title),1),m("div",ce,[w(ne),m("div",de,[m("span",ge,T(f.value),1),x[1]||(x[1]=m("button",{class:"flex items-center gap-2 rounded bg-white px-3 py-1.5 text-sm font-medium shadow-card hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-white"},[m("svg",{class:"fill-current",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[m("path",{d:"M14.6667 2.66666H12.6667V1.33333C12.6667 0.966663 12.3667 0.666663 12 0.666663C11.6333 0.666663 11.3333 0.966663 11.3333 1.33333V2.66666H4.66667V1.33333C4.66667 0.966663 4.36667 0.666663 4 0.666663C3.63333 0.666663 3.33333 0.966663 3.33333 1.33333V2.66666H1.33333C0.599999 2.66666 0 3.26666 0 4V14.6667C0 15.4 0.599999 16 1.33333 16H14.6667C15.4 16 16 15.4 16 14.6667V4C16 3.26666 15.4 2.66666 14.6667 2.66666ZM14.6667 14.6667H1.33333V5.33333H14.6667V14.6667Z",fill:""})]),m("span",null,"Select Date")],-1)),N(o)?(J(),L("div",ue,[m("span",me,T(N(o)()),1),m("button",{onClick:x[0]||(x[0]=(...j)=>N(l)&&N(l)(...j)),class:"text-sm text-red-500 hover:underline"},"Logout")])):ae("",!0)])])]))}}),A=localStorage.getItem("app_session_user"),fe=A?`${A}_`:"",i=s=>fe+s,u=(s,l)=>{const o=localStorage.getItem(i(s));if(!o)return l;try{return JSON.parse(o)}catch{return l}},h=d(u("tracker_entries",[])),b=d(u("tracker_grid",{})),v=d(u("tracker_saved_days",[])),y=d(u("tracker_major_things",{events:[],food:[],movies:[],games:[],purchases:[]}));g(h,s=>{localStorage.setItem(i("tracker_entries"),JSON.stringify(s))},{deep:!0});g(b,s=>{localStorage.setItem(i("tracker_grid"),JSON.stringify(s))},{deep:!0});g(v,s=>{localStorage.setItem(i("tracker_saved_days"),JSON.stringify(s))},{deep:!0});g(y,s=>{localStorage.setItem(i("tracker_major_things"),JSON.stringify(s))},{deep:!0});function Se(){const s=e=>{const t=new Date().toISOString().split("T")[0];if(e.date>t){alert("Cannot add entries for future dates!");return}h.value.unshift({id:Date.now(),...e})},l=e=>{h.value=h.value.filter(t=>t.id!==e)},o=(e,t,r,a=!1)=>{const n=new Date().toISOString().split("T")[0];if(e>n){alert("Cannot edit future dates!");return}if(!a&&v.value.includes(e)){console.warn("Day is locked");return}b.value[e]||(b.value[e]={}),r==="eraser"?delete b.value[e][t]:b.value[e][t]=r},f=e=>{v.value.includes(e)||v.value.push(e)},B=e=>{v.value=v.value.filter(t=>t!==e)},x=e=>v.value.includes(e),j=(e,t,r)=>{y.value[e]||(y.value[e]=[]),y.value[e].push({id:Date.now(),text:t,meta:r})},Y=(e,t)=>{y.value[e]&&(y.value[e]=y.value[e].filter(r=>r.id!==t))},c=d(u("tracker_collections",{pokemon:[],weiss:[],others:[]}));g(c,e=>{localStorage.setItem(i("tracker_collections"),JSON.stringify(e))},{deep:!0});const U=(e,t)=>{c.value[e]||(c.value[e]=[]),c.value[e].unshift({id:Date.now(),...t})},W=(e,t)=>{c.value[e]&&(c.value[e]=c.value[e].filter(r=>r.id!==t))},G=(e,t,r)=>{if(c.value[e]){const a=c.value[e].findIndex(n=>n.id===t);a!==-1&&(c.value[e][a]={...c.value[e][a],...r})}},p=d(u("tracker_categories",[{id:"sleep",label:"Sleep",color:"#6B7280"},{id:"work",label:"Work",color:"#3B82F6"},{id:"hobbies",label:"Hobbies",color:"#F97316"},{id:"hobbies",label:"Hobbies",color:"#F97316"},{id:"exercise",label:"Exercise",color:"#22C55E"},{id:"friends",label:"Friends",color:"#EC4899"},{id:"relax",label:"Relaxation",color:"#2DD4BF"},{id:"dating",label:"Dating",color:"#F43F5E"},{id:"family",label:"Family",color:"#A855F7"},{id:"chores",label:"Chores",color:"#EAB308"},{id:"travel",label:"Travel",color:"#06B6D4"},{id:"misc",label:"Misc",color:"#9CA3AF"}]));g(p,e=>{localStorage.setItem(i("tracker_categories"),JSON.stringify(e))},{deep:!0});const P=(e,t)=>{const r=e.toLowerCase().replace(/\s+/g,"-");p.value.find(a=>a.id===r)||p.value.push({id:r,label:e,color:t})},Z=e=>{p.value=p.value.filter(t=>t.id!==e)},z=(e,t)=>{const r=p.value.find(a=>a.id===e);r&&Object.assign(r,t)},E=d(u("tracker_cat_task",["Work","Personal","Project"])),C=d(u("tracker_cat_finance",["Food","Transport","Bills","Shopping"])),F=d(u("tracker_cat_invest",["Stocks","MF","Gold","Crypto"]));g(E,e=>{localStorage.setItem(i("tracker_cat_task"),JSON.stringify(e))},{deep:!0}),g(C,e=>{localStorage.setItem(i("tracker_cat_finance"),JSON.stringify(e))},{deep:!0}),g(F,e=>{localStorage.setItem(i("tracker_cat_invest"),JSON.stringify(e))},{deep:!0});const R=(e,t)=>{const r=e==="task"?E:e==="finance"?C:F;r.value.includes(t)||r.value.push(t)},q=(e,t)=>{const r=e==="task"?E:e==="finance"?C:F;r.value=r.value.filter(a=>a!==t)},O=d(localStorage.getItem(i("tracker_theme"))!=="light");g(O,e=>{localStorage.setItem(i("tracker_theme"),e?"dark":"light"),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},{immediate:!0});const Q=()=>{O.value=!O.value},k=d(u("tracker_accounts",[{id:"bank-1",name:"Bank Account",type:"bank",color:"#3B82F6"},{id:"credit-1",name:"Credit Card",type:"credit",color:"#EF4444"}]));g(k,e=>{localStorage.setItem(i("tracker_accounts"),JSON.stringify(e))},{deep:!0});const X=(e,t)=>{const r=e.toLowerCase().replace(/\s+/g,"-")+"-"+Date.now();k.value.push({id:r,name:e,type:t})},K=e=>{k.value=k.value.filter(t=>t.id!==e)},ee=(e,t)=>{const r=k.value.find(a=>a.id===e);r&&Object.assign(r,t)},_=d(u("tracker_balances",{}));return g(_,e=>{localStorage.setItem(i("tracker_balances"),JSON.stringify(e))},{deep:!0}),{categories:p,addCategory:P,removeCategory:Z,taskCategories:E,financeCategories:C,investCategories:F,addExtendedCategory:R,removeExtendedCategory:q,isDarkMode:O,toggleTheme:Q,dailyEntries:h,gridData:b,majorThingsData:y,collectionItems:c,balanceLogs:_,addDailyEntry:s,deleteDailyEntry:l,updateGridCell:o,addMajorThing:j,removeMajorThing:Y,addCollectionItem:U,removeCollectionItem:W,updateCollectionItem:G,accounts:k,addAccount:X,removeAccount:K,updateAccount:ee,updateBalanceLog:(e,t,r)=>{const a=new Date().toISOString().split("T")[0];if(e>a){alert("Cannot update balance for future dates!");return}_.value[e]||(_.value[e]={}),_.value[e][t]=r},getNetBalance:e=>{const t=_.value[e];if(!t)return 0;let r=0;return k.value.forEach(a=>{const n=t[a.id]||0;a.type==="credit"?r-=n:r+=n}),r},getEntriesByDate:e=>h.value.filter(t=>t.date===e),getMonthlyFinance:(e,t)=>h.value.filter(r=>{const a=new Date(r.date),n=r.category==="finance"||C.value.some(M=>M.toLowerCase()===r.category.toLowerCase());return a.getMonth()===e&&a.getFullYear()===t&&n}).reduce((r,a)=>r+(a.amount||0),0),getMonthlyCategoryDistribution:(e,t)=>{const r={},a=new Date(t,e+1,0).getDate();for(let n=1;n<=a;n++){const M=`${t}-${String(e+1).padStart(2,"0")}-${String(n).padStart(2,"0")}`,V=b.value[M];V&&Object.values(V).forEach($=>{r[$]=(r[$]||0)+1})}return r},getYearlyCategoryDistribution:e=>{const t={};return Object.entries(b.value).forEach(([r,a])=>{r.startsWith(String(e))&&Object.values(a).forEach(n=>{t[n]=(t[n]||0)+1})}),t},savedDays:v,saveDay:f,unlockDay:B,isDayLocked:x,updateCategory:z}}export{Ce as _,Se as u};
