import{d as P,c as n,r as f,o as c,a as p,b as t,t as d,w as _,v as C,F as B,f as I,n as L,u as j,m as K,j as F,g as J,k as R}from"./index-DsleNGlg.js";import{u as Z,_ as W}from"./useTracker-BaQ-do2c.js";import"./useAuth-CezXVzgo.js";const Y={class:"rounded-lg border border-gray-200 bg-white shadow-theme-xs dark:border-gray-800 dark:bg-gray-900"},q={class:"px-4 py-4 sm:px-6"},z={class:"font-bold text-black dark:text-white"},G={class:"max-w-full overflow-x-auto"},Q={class:"w-full table-auto"},X={class:"border-b border-gray-200 dark:border-gray-800"},tt={class:"px-4 py-3"},et={class:"px-4 py-3"},at={class:"px-4 py-3"},st={class:"px-4 py-3"},rt={class:"px-4 py-3 text-sm text-black dark:text-white"},ot={class:"px-4 py-3 text-sm text-black dark:text-white"},lt={class:"px-4 py-3 text-sm text-red-500 font-medium"},dt={class:"px-4 py-3 text-sm text-green-500 font-medium"},nt={class:"px-4 py-3 text-right"},it=["onClick"],ut={class:"border-t border-gray-200 px-4 py-4 dark:border-gray-800"},ct={class:"flex items-center justify-end gap-6 text-sm"},pt={class:"flex flex-col text-right"},bt={class:"font-bold text-red-500"},xt={class:"flex flex-col text-right"},gt={class:"font-bold text-green-500"},yt={class:"flex flex-col text-right"},mt=P({__name:"FinancialCollectionTable",props:{title:{},listKey:{}},setup(H){const N=H,{collectionItems:m,addCollectionItem:A,removeCollectionItem:$}=Z(),g=n(()=>m.value[N.listKey]||[]),k=f(new Date().toISOString().split("T")[0]),u=f(""),h=f(""),b=f(""),D=()=>{!u.value||!h.value||(A(N.listKey,{date:k.value,item:u.value,price:parseFloat(h.value),sold:b.value?parseFloat(b.value):null,isSold:!!b.value}),u.value="",h.value="",b.value="")},O=n(()=>[...g.value].sort((r,a)=>new Date(a.date).getTime()-new Date(r.date).getTime())),i=r=>"₹"+r.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}),y=r=>{if(!r.sold)return"-";const a=r.sold-r.price;return i(a)},U=r=>r.sold?r.sold-r.price>=0?"text-green-500":"text-red-500":"text-gray-400",S=n(()=>g.value.reduce((r,a)=>r+(a.price||0),0)),w=n(()=>g.value.reduce((r,a)=>r+(a.sold||0),0)),V=n(()=>w.value-S.value);return(r,a)=>(c(),p("div",Y,[t("div",q,[t("h3",z,d(r.title)+" Tracker",1)]),t("div",G,[t("table",Q,[a[6]||(a[6]=t("thead",null,[t("tr",{class:"bg-gray-50 text-left dark:bg-gray-800"},[t("th",{class:"min-w-[120px] px-4 py-3 font-medium text-black dark:text-white"},"Date"),t("th",{class:"min-w-[220px] px-4 py-3 font-medium text-black dark:text-white"},"Item"),t("th",{class:"min-w-[120px] px-4 py-3 font-medium text-black dark:text-white"},"Price (Buy)"),t("th",{class:"min-w-[120px] px-4 py-3 font-medium text-black dark:text-white"},"Sold"),t("th",{class:"min-w-[120px] px-4 py-3 font-medium text-black dark:text-white"},"P/L"),t("th",{class:"px-4 py-3"})])],-1)),t("tbody",null,[t("tr",X,[t("td",tt,[_(t("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>k.value=l),type:"date",class:"w-full rounded border border-gray-200 bg-transparent px-2 py-1 text-sm outline-none focus:border-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white"},null,512),[[C,k.value]])]),t("td",et,[_(t("input",{"onUpdate:modelValue":a[1]||(a[1]=l=>u.value=l),type:"text",placeholder:"Item Name",class:"w-full rounded border border-gray-200 bg-transparent px-2 py-1 text-sm outline-none focus:border-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white"},null,512),[[C,u.value]])]),t("td",at,[_(t("input",{"onUpdate:modelValue":a[2]||(a[2]=l=>h.value=l),type:"number",placeholder:"0.00",class:"w-full rounded border border-gray-200 bg-transparent px-2 py-1 text-sm outline-none focus:border-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white"},null,512),[[C,h.value]])]),t("td",st,[_(t("input",{"onUpdate:modelValue":a[3]||(a[3]=l=>b.value=l),type:"number",placeholder:"0.00",class:"w-full rounded border border-gray-200 bg-transparent px-2 py-1 text-sm outline-none focus:border-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white"},null,512),[[C,b.value]])]),a[4]||(a[4]=t("td",{class:"px-4 py-3"},[t("span",{class:"text-xs text-gray-400"},"Auto")],-1)),t("td",{class:"px-4 py-3"},[t("button",{onClick:D,class:"flex items-center justify-center rounded bg-brand-500 px-3 py-1 text-sm font-medium text-white hover:bg-brand-600"}," Add ")])]),(c(!0),p(B,null,I(O.value,l=>(c(),p("tr",{key:l.id,class:"border-b border-gray-200 dark:border-gray-800 last:border-0 hover:bg-gray-50 dark:hover:bg-boxdark"},[t("td",rt,d(l.date),1),t("td",ot,d(l.item),1),t("td",lt,d(i(l.price)),1),t("td",dt,d(l.sold?i(l.sold):"-"),1),t("td",{class:L(["px-4 py-3 text-sm font-bold",U(l)])},d(y(l)),3),t("td",nt,[t("button",{onClick:M=>j($)(r.listKey,l.id),class:"text-gray-500 hover:text-red-500"},a[5]||(a[5]=[t("svg",{class:"fill-current",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M13.7535 2.47502H11.5879V1.9969C11.5879 1.15315 10.9129 0.478149 10.0691 0.478149H7.90352C7.05977 0.478149 6.38477 1.15315 6.38477 1.9969V2.47502H2.21914C1.70352 2.47502 1.28164 2.8969 1.28164 3.41252C1.28164 3.92815 1.70352 4.35002 2.21914 4.35002V15.0281C2.21914 15.8719 2.89414 16.5469 3.73789 16.5469H14.2348C15.0785 16.5469 15.7535 15.8719 15.7535 15.0281V4.35002C16.2691 4.35002 16.691 3.92815 16.691 3.41252C16.691 2.8969 16.2691 2.47502 15.7535 2.47502H13.7535ZM7.90352 1.9969H10.0691V2.47502H7.90352V1.9969ZM14.2348 15.0281H3.73789V4.35002H14.2348V15.0281Z",fill:""}),t("path",{d:"M6.22969 13.5656C6.51094 13.5656 6.74531 13.3313 6.74531 13.05V6.32812C6.74531 6.04688 6.51094 5.8125 6.22969 5.8125C5.94844 5.8125 5.71406 6.04688 5.71406 6.32812V13.05C5.71406 13.3313 5.94844 13.5656 6.22969 13.5656Z",fill:""}),t("path",{d:"M11.7703 13.5656C12.0516 13.5656 12.2859 13.3313 12.2859 13.05V6.32812C12.2859 6.04688 12.0516 5.8125 11.7703 5.8125C11.4891 5.8125 11.2547 6.04688 11.2547 6.32812V13.05C11.2547 13.3313 11.4891 13.5656 11.7703 13.5656Z",fill:""})],-1)]),8,it)])]))),128))])])]),t("div",ut,[t("div",ct,[t("div",pt,[a[7]||(a[7]=t("span",{class:"text-gray-500"},"Total Spent",-1)),t("span",bt,d(i(S.value)),1)]),t("div",xt,[a[8]||(a[8]=t("span",{class:"text-gray-500"},"Total Sold",-1)),t("span",gt,d(i(w.value)),1)]),t("div",yt,[a[9]||(a[9]=t("span",{class:"text-gray-500"},"Net P/L",-1)),t("span",{class:L(["font-bold text-lg",V.value>=0?"text-green-500":"text-red-500"])},d(i(V.value)),3)])])])]))}}),ht={class:"space-y-6"},vt={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},ft={class:"rounded-lg border border-gray-200 bg-white shadow-theme-xs dark:border-gray-800 dark:bg-gray-900"},kt={class:"p-4"},wt={class:"w-full text-sm"},_t={class:"divide-y divide-gray-100 dark:divide-gray-800"},Ct={class:"py-2 text-black dark:text-white font-medium"},$t={class:"py-2 text-right text-red-500"},Dt={class:"py-2 text-right text-gray-500"},St={class:"font-bold border-t border-gray-200 dark:border-gray-700"},Vt={class:"py-3 text-right text-red-600"},Tt={class:"rounded-lg border border-gray-200 bg-white p-4 shadow-theme-xs dark:border-gray-800 dark:bg-gray-900 flex flex-col"},Lt={id:"spendChart",class:"flex-1 w-full h-full min-h-[300px]"},Nt={class:"grid grid-cols-1 gap-6 md:grid-cols-3"},Ft={class:"rounded-lg border border-gray-200 bg-white shadow-theme-xs dark:border-gray-800 dark:bg-gray-900"},Bt={class:"p-4 space-y-4"},It={class:"grid grid-cols-2 gap-4"},At=["onUpdate:modelValue"],Ot={key:0,class:"mt-2 text-center text-sm"},Ut={class:"md:col-span-2 rounded-lg border border-gray-200 bg-white p-4 shadow-theme-xs dark:border-gray-800 dark:bg-gray-900 flex flex-col"},Et={class:"flex items-center justify-between mb-4"},Ht={class:"font-bold text-brand-500 text-xl"},Mt={id:"balanceChart",class:"flex-1 w-full h-full min-h-[300px]"},Pt={class:"space-y-4"},jt={class:"flex gap-4 border-b border-gray-200 dark:border-gray-800"},Zt=["onClick"],Kt={class:"min-h-[400px]"},Yt=P({__name:"FinancialTracker",setup(H){const{getMonthlyFinance:N,balanceLogs:m,updateBalanceLog:A,getNetBalance:$,accounts:g}=Z(),k=[{id:"stocks",label:"Stocks"},{id:"others",label:"Others"}],u=f("stocks"),h=n(()=>{var s;return((s=k.find(e=>e.id===u.value))==null?void 0:s.label)||""}),b=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],D=n(()=>b.map((s,e)=>{const x=N(e,2026);return{name:s,amount:x}})),O=n(()=>D.value.reduce((s,e)=>s+e.amount,0)),i=f(new Date().toISOString().split("T")[0]),y=f({});K(i,s=>{y.value={};const e=m.value[s];if(e)g.value.forEach(x=>{y.value[x.id]=e[x.id]!==void 0?e[x.id]:""});else{const o=Object.keys(m.value).sort().reverse().find(v=>v<s);if(o){const v=m.value[o];g.value.forEach(E=>{y.value[E.id]=v[E.id]!==void 0?v[E.id]:""})}}},{immediate:!0});const U=()=>{i.value&&(g.value.forEach(s=>{const e=Number(y.value[s.id]);A(i.value,s.id,isNaN(e)?0:e)}),alert("Balance updated!"))},S=n(()=>$(i.value)),w=n(()=>{const s=new Date(i.value);s.setDate(s.getDate()-1);const e=s.toISOString().split("T")[0];return m.value[e]?S.value-$(e):null}),V=n(()=>Object.keys(m.value).sort().map(e=>({date:e,net:$(e)}))),r=n(()=>[{name:"Net Worth",data:V.value.map(s=>s.net)}]),a=n(()=>({chart:{type:"area",fontFamily:"Satoshi, sans-serif",toolbar:{show:!1}},colors:["#3C50E0"],stroke:{curve:"smooth",width:2},fill:{opacity:.1},xaxis:{categories:V.value.map(s=>s.date),axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1}},yaxis:{labels:{formatter:s=>`₹${s}`}},grid:{borderColor:"#e4e4e7",strokeDashArray:4},dataLabels:{enabled:!1},theme:{mode:"light"}})),l=n(()=>[{name:"Expenditure",data:D.value.map(s=>s.amount)}]),M=n(()=>({chart:{type:"line",fontFamily:"Satoshi, sans-serif",toolbar:{show:!1}},colors:["#F87171"],stroke:{curve:"smooth",width:3},xaxis:{categories:b,axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:s=>`₹${s}`}},grid:{borderColor:"#e4e4e7",strokeDashArray:4},dataLabels:{enabled:!1},theme:{mode:"light"}})),T=s=>"₹"+s.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2});return(s,e)=>{const x=R("apexchart");return c(),p("div",ht,[F(W,{title:"Financial Overview 2026"}),t("div",vt,[t("div",ft,[e[4]||(e[4]=t("div",{class:"px-4 py-4 border-b border-gray-200 dark:border-gray-800"},[t("h3",{class:"font-bold text-black dark:text-white"},"Spend Tracker")],-1)),t("div",kt,[t("table",wt,[e[3]||(e[3]=t("thead",null,[t("tr",{class:"text-left text-gray-500"},[t("th",{class:"pb-2"},"Month"),t("th",{class:"pb-2 text-right"},"Amount"),t("th",{class:"pb-2 text-right"},"Avg/Day")])],-1)),t("tbody",_t,[(c(!0),p(B,null,I(D.value,o=>(c(),p("tr",{key:o.name},[t("td",Ct,d(o.name),1),t("td",$t,d(T(o.amount)),1),t("td",Dt,d(T(o.amount/30)),1)]))),128)),t("tr",St,[e[1]||(e[1]=t("td",{class:"py-3"},"Total Spend 2026",-1)),t("td",Vt,d(T(O.value)),1),e[2]||(e[2]=t("td",null,null,-1))])])])])]),t("div",Tt,[e[5]||(e[5]=t("h3",{class:"font-bold text-black dark:text-white mb-4"},"Expenditure in 2026",-1)),t("div",Lt,[F(x,{type:"line",height:"100%",options:M.value,series:l.value},null,8,["options","series"])])])]),t("div",Nt,[t("div",Ft,[e[8]||(e[8]=t("div",{class:"px-4 py-4 border-b border-gray-200 dark:border-gray-800"},[t("h3",{class:"font-bold text-black dark:text-white"},"Daily Balance Log"),t("p",{class:"text-xs text-gray-500"},"Log your end-of-day balances to track net worth and implied expense.")],-1)),t("div",Bt,[t("div",null,[e[6]||(e[6]=t("label",{class:"mb-1 block text-sm font-medium text-black dark:text-white"},"Date",-1)),_(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),type:"date",class:"w-full rounded border-[1.5px] border-stroke bg-transparent px-3 py-2 font-medium outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-gray-700 dark:bg-gray-800 dark:text-white dark:focus:border-primary"},null,512),[[C,i.value]])]),t("div",It,[(c(!0),p(B,null,I(j(g),o=>(c(),p("div",{key:o.id},[t("label",{class:L(["mb-1 block text-sm font-medium",o.type==="credit"?"text-red-500":"text-gray-500"])},d(o.name),3),_(t("input",{"onUpdate:modelValue":v=>y.value[o.id]=v,type:"number",placeholder:"0",class:"w-full rounded border border-gray-200 px-3 py-2 text-sm outline-none focus:border-brand-500 dark:border-gray-700 dark:bg-gray-800 dark:text-white"},null,8,At),[[C,y.value[o.id],void 0,{number:!0}]])]))),128))]),t("button",{onClick:U,class:"w-full rounded bg-brand-500 py-2 font-medium text-white hover:bg-brand-600"}," Update Balance "),w.value!==null?(c(),p("div",Ot,[e[7]||(e[7]=t("span",{class:"text-gray-500"},"Implied Daily Change: ",-1)),t("span",{class:L(["font-bold",w.value>=0?"text-green-500":"text-red-500"])},d(T(w.value)),3)])):J("",!0)])]),t("div",Ut,[t("div",Et,[e[9]||(e[9]=t("h3",{class:"font-bold text-black dark:text-white"},"Net Liquidity Trend",-1)),t("h3",Ht,d(T(S.value)),1)]),t("div",Mt,[F(x,{type:"area",height:"100%",options:a.value,series:r.value},null,8,["options","series"])])])]),t("div",Pt,[t("div",jt,[(c(),p(B,null,I(k,o=>t("button",{key:o.id,onClick:v=>u.value=o.id,class:L(["pb-2 text-sm font-medium transition-colors hover:text-brand-500 border-b-2",u.value===o.id?"border-brand-500 text-brand-500":"border-transparent text-gray-500"])},d(o.label),11,Zt)),64))]),t("div",Kt,[F(mt,{title:h.value,"list-key":u.value},null,8,["title","list-key"])])])])}}});export{Yt as default};
