import{r as l}from"./index-DsleNGlg.js";const a=()=>localStorage.getItem("app_session_user"),n=()=>JSON.parse(localStorage.getItem("app_users_db")||"{}"),t=l(a());function d(){const s=l("");return{sessionUser:t,login:(e,r)=>{if(!e||!r)return s.value="Please enter both username and password.",!1;const o=n();return o[e]?o[e]===r?(localStorage.setItem("app_session_user",e),t.value=e,window.location.reload(),!0):(s.value="Invalid password.",!1):(o[e]=r,localStorage.setItem("app_users_db",JSON.stringify(o)),localStorage.setItem("app_session_user",e),t.value=e,window.location.reload(),!0)},logout:()=>{localStorage.removeItem("app_session_user"),t.value=null,window.location.reload()},isAuthenticated:()=>!!t.value,currentUser:()=>t.value,error:s}}export{d as u};
